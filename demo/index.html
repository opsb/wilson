<!DOCTYPE html>
<html>
	<head>
		<script async="false">
			// ensure scripts are loaded in correct order
			var loadScript = function( url ) {
			    if (url) {
			        var doc = document,
			        t = doc.createElement("script"),
			        s = doc.getElementsByTagName("script")[0];
			        t.type = "text/javascript";
			        // Keep script order!
			        t.async = false;
			        t.src = url;
			        s.parentNode.insertBefore(t, s);
			    }
			};
			// extremly dodgy amd shim to get whenjs working without amd, avert your eyes
			var counter = 0;
			window.define = function(factory) {
				var global = (++counter == 0 ? "when" : "apply");
				if(counter++ == 1) {
					window.when = factory();
				} else {
					window.apply = factory();
				}
			};
			window.define.amd = {};

			loadScript("https://raw.github.com/cujojs/when/master/when.js");
			loadScript("https://raw.github.com/cujojs/when/master/apply.js");
			loadScript("https://raw.github.com/opsb/wilson/master/wilson.js");
			loadScript("main.js");
		</script>
		<style>
			body {
				text-align: center;
			}

			pre {
				margin:0 auto;
				text-align: left;
				width:700px;
			}
		</style>
	</head>

	<body>
		<h1>Wilsonjs demo</h1>
		<h2>Wilson says</h2>
		<div id="message"></div>

		<h2>Code</h2>
		<pre>
wilson.register('config', [], function(define){		
	define({
		message: "hello"
	});
});

wilson.register('config2', [], function(define){		
	setTimeout(function(){
		define({
			message: "world"
		});			
	}, 1000);
});	

wilson.register('domReady', [], function(ready){		
	window.onload(function(){
		ready();
	});
});

wilson.require(['config', 'config2', 'domReady'], function(config, config2){
	document.getElementById('message').innerHTML = config.message + config2.message;
});

		</pre>
	</body>
</html>